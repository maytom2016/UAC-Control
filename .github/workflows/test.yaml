permissions:
  contents: write
name: test
on:
  repository_dispatch:
  workflow_dispatch:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:

  build:

    strategy:
      matrix:
        configuration: [Release]

    runs-on: windows-latest

    steps:
    - name: gettag
      id: lspath
      run: |
        cd ..
        ls
        pwd
      
    - name: gettag
      id: version
      uses: ashley-taylor/read-json-property-action@v1.1
      with:
          path: D:\a\UAC-Control\UAC-Control\UAC-Control\bin\Release\net6.0-windows\UAC-Control.deps.json
          property: targets
          
    - name: Maketags
      id: tag
      run: |
        ${{steps.version.outputs.value}} -match 'UAC-Control/\d.\d.\d' 
        $matches>> $GITHUB_OUTPUT
